
<!-- This script is the one that takes the entry clicked on and relays the information into the modal -->
<script>
  $('#clusterDetail').on('show.bs.modal', function (event) {
    let trigger = $(event.relatedTarget)
    let clusterName = trigger.data('clustername')
    let taskdef = trigger.data('taskdef')
    let imagetag = trigger.data('imagetag')
    let revision = trigger.data('revision')
    let date = trigger.data('date')
    let cpu = trigger.data('cpu')
    let memory = trigger.data('memory')
    let modal = $(this)
    modal.find('.cluster-title').text(clusterName)
    modal.find('.taskdef').text(taskdef)
    modal.find('.imagetag').text(imagetag)
    modal.find('.revision').text(revision)
    modal.find('.date').text(date)
    modal.find('.cpu').text(cpu)
    modal.find('.memory').text(memory)

  })
</script>

<!-- This is the modal and it is working with the function above to create multiple unique modal's based on which entry was pressed. -->
<div class="modal fade" id="clusterDetail" tabindex="-1" role="dialog" aria-labelledby="clusterLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5> Cluster: &nbsp</h5> <h5 class="cluster-title" id="clusterLabel"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="cluster-info">
        <br />
        <b> Task Definition: </b> <span class="taskdef"></span>
        <br />
        <br />
        <b> Image Tag: </b> <span class="imagetag"></span>
        <br />
        <br />
        <b> Revision: </b> <span class="revision"></span>
        <br />
        <br />
        <b> Date: </b> <span class="date"></span>
        <br />
        <br />
        <b> CPU: </b> <span class="cpu"></span>
        <br />
        <br />
        <b> Memory: </b> <span class="memory"</span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<table class="table table-hover table-striped" style="">
  <thead>
    <tr>
      <th scope="col">Client</th>
      <th scope="col">Product</th>
      <th scope="col">Release #</th>
      <th scope="col">Cluster</th>
      <th scope="col">Environment</th>
      <th scope="col">Region</th>
    </tr>
  </thead>
  <tbody>

<!-- This is a for loop to render the search results  -->
    {% for client in client_results %}
    {% for result in client %}

    <tr
      data-toggle="modal"
      data-target="#clusterDetail"
      data-clustername="{{result.cluster_name}}"
      data-taskdef="{{result.task_definition_name}}"
      data-imagetag="{{result.image_tag}}"
      data-revision="{{result.revision}}"
      data-date="{{result.date}}"
      data-cpu="{{result.cpu}}"
      data-memory="{{result.memory}}"
      >
      <th scope="row">{{result.client_name}}</th>
      <td> {{result.product_name}} </td>
      <td> {{result.release}} </td>
      <td> {{result.cluster_name}} </td>
      <td> {{result.environment}} </td>
      <td> {{result.region}} </td>
      <td> {{result.components}} </td>
    </tr>

    {% endfor %}
    {% endfor %}
  </tbody>
</table>

{% for result in product_results%}
<h1>{{result}}</h1>
{% endfor %}